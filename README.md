# 🚗 Car Manager Bot ([@CarMngrBot](https://t.me/CarMngrBot))

<div align="center">
  
![Car Manager Logo](files/images/logo/logo.png)

[![Telegram Bot](https://img.shields.io/badge/Telegram-Bot-blue?logo=telegram)](https://t.me/CarMngrBot)
[![Telegram Channel](https://img.shields.io/badge/Telegram-News%20Channel-blue?style=for-the-badge&logo=telegram)](https://t.me/CarMngrBot_news)
[![Website](https://img.shields.io/badge/Website-CarMngrBot-orange)](http://carmngrbot.com.swtest.ru/)
[![Developer](https://img.shields.io/badge/Developer-@x__evgenyalex__x-blue?style=for-the-badge&logo=telegram)](https://t.me/x_evgenyalex_x)
[![Python](https://img.shields.io/badge/Python-3.11-green?logo=python)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow)](https://opensource.org/licenses/MIT)
[![GitHub](https://img.shields.io/badge/GitHub-Website_Repo-lightgrey?logo=github)](https://github.com/EvgenyAlex21/CarMngrBot-Website)

</div>

## 📌 О проекте

**Car Manager Bot** — это многофункциональный Telegram-бот, созданный для автовладельцев. Он объединяет все необходимые автомобильные сервисы в одном удобном интерфейсе, делая владение автомобилем проще, удобнее и экономичнее.

## 🌟 Преимущества использования:

- 🔄 **Всегда под рукой**: доступ ко всем функциям через любимый мессенджер
- 💰 **Экономия**: контроль расходов на обслуживание автомобиля
- ⏱️ **Экономия времени**: все необходимые инструменты в одном месте
- 📊 **Аналитика**: отслеживание статистики расходов и использования транспорта
- 🔔 **Уведомления**: напоминания о важных событиях, связанных с автомобилем

## 📸 Скриншоты приложения

### Функционал пользователя

**Пользователь 1** - меню пользователя
![Информация](/images/project_view/Пользователь(1).png)

### Функционал администратора

**Администратор 1** - меню администратора
![Информация](/images/project_view/Администратор(1).png)

---

## 🎯 Основные возможности бота

### 👤 Пользовательские функции

- 💳 **Центр подписок** — управление подписками, оплата, возвраты, баллы и промокоды
- 🧮 **Калькуляторы** — расход топлива, алкоголь, автокредит, налоги, растаможка, ОСАГО, шины
- 💰 **Учет расходов** — ведение истории трат и ремонтов по транспорту
- 🔍 **Поиск транспорта** — навигация к местоположению вашего автомобиля
- 📍 **Поиск мест** — находите АЗС, автосервисы, парковки, ГИБДД и другие объекты
- 🌤️ **Погода** — актуальные прогнозы, которые доступны на сегодня, завтра, неделю, месяц
- ⛽ **Цены на топливо** — мониторинг стоимости топлива (АИ-92, АИ-95, АИ-98, АИ-100, ДТ, Газ)
- 🏷️ **Код региона** — определение региона по коду или госномеру
- 🔧 **Коды OBD2** — расшифровка диагностических кодов ошибок
- ⏰ **Напоминания** — создание различных типов уведомлений
- 📡 **Антирадар** — уведомления о камерах на дорогах
- 🔧 **Прочие функции** — новости, курсы валют, уведомления, бланки, реклама, чат с админом

### 👨‍💼 Административные функции

- 🔄 **Управление подписками** — добавление, просмотр, удаление подписок пользователей
- 💹 **Финансовые операции** — управление баллами, магазином, промокодами и подарками
- 📝 **Модерация контента** — публикация новостей, управление рекламой
- 💬 **Коммуникации** — чат с пользователями, массовые оповещения, диалоги
- 🔒 **Безопасность** — блокировка пользователей, права доступа, мониторинг
- ⚙️ **Техническое управление** — файлы, резервные копии, мониторинг системы
- 🚨 **Экстренные функции** — остановка бота с подтверждением и таймером
- 📊 **Аналитика** — статистика использования, экспорт данных в Excel
- 🤖 **Автоматизация** — фоновые процессы для уведомлений и очистки данных
- 🔗 **Интеграция** — полная синхронизация с пользовательскими функциями

---

## 🛠️ Технологии

Проект разработан с использованием следующих технологий:

```
├── 🐍 Python 3.11+
│   ├── 🤖 pyTelegramBotAPI/telebot - основной фреймворк для работы с Telegram API
│   ├── 📊 pandas, matplotlib, openpyxl - для обработки, визуализации и экспорта данных
│   ├── 🗺️ geopy - для работы с геолокацией и вычисления расстояний
│   ├── ⏱️ schedule - для планирования фоновых задач и уведомлений
│   ├── ⏰ datetime, pytz - для работы с датами, временем и часовыми поясами
│   ├── 🔍 re - для обработки текста и валидации пользовательского ввода
│   ├── 🌐 requests, beautifulsoup4, urllib3 - для работы с внешними API и парсинга
│   ├── 🔄 threading - для параллельного выполнения задач
│   ├── 🔒 python-dotenv - для безопасной работы с конфиденциальными данными
│   ├── 📦 zipfile - для создания и распаковки резервных копий данных
│   ├── 🔤 chardet - для определения кодировки текста
│   ├── 🔄 uuid - для генерации уникальных идентификаторов
│   ├── 📊 scipy - для статистических расчетов
│   └── 🎨 colorama - для цветного вывода в консоль
└── 🌐 Внешние API
    ├── 🌡️ OpenWeatherMap - для получения данных о погоде
    ├── 🗺️ LocationIQ - для геокодирования и поиска локаций
    ├── 💳 Telegram Payments - для обработки встроенных платежей Telegram
    ├── 🔐 Paymaster API - для обработки платежей и возвратов
    └── 🕸️ Tor/Proxy - для анонимных запросов к защищенным ресурсам
```

## 🏗️ Структура проекта

```
├── main.py                      # Основной файл запуска бота с обработкой ошибок и повторными попытками
├── requirements.txt             # Зависимости проекта для установки
├── README.md                    # Документация проекта
├── .env                         # Файл с переменными окружения
│
├── core/                        # Ядро бота
│   ├── __init__.py              # Инициализация модуля
│   ├── bot_instance.py          # Инициализация экземпляра бота Telegram
│   ├── config.py                # Конфигурация и загрузка переменных окружения
│   └── imports.py               # Централизованные импорты для всего проекта
│
├── handlers/                    # Обработчики команд и сообщений
│   ├── admin/                   # Административные функции
│   │   ├── __init__.py          # Инициализация модуля админ-функций
│   │   ├── admin_main_menu.py   # Главное меню администратора
│   │   ├── utils.py             # Утилиты для административных функций
│   │   │
│   │   ├── admin/               # Управление администраторами
│   │   ├── advertisement/       # Управление рекламой
│   │   ├── backup/              # Функции резервного копирования
│   │   ├── ban/                 # Управление блокировками
│   │   ├── communication/       # Коммуникация с пользователями
│   │   ├── editorial/           # Редакторские функции
│   │   ├── emergency/           # Функции экстренного управления
│   │   ├── files/               # Управление файлами
│   │   ├── functions/           # Настройка функций бота
│   │   ├── inactivity_notifications/ # Уведомления о неактивности
│   │   ├── statistics/          # Статистика и аналитика
│   │   └── system_management/   # Управление системой
│   │
│   └── user/                    # Пользовательские функции
│       ├── __init__.py          # Инициализация пользовательского модуля
│       ├── user_main_menu.py    # Главное меню пользователя
│       ├── utils.py             # Утилиты для пользовательских функций
|       |
│       ├── subscription/        # Управление подписками
│       ├── antiradar/           # Функция антирадар
│       ├── calculators/         # Различные калькуляторы
│       ├── code_region/         # Определение региона по коду
│       ├── codes_obd2/          # Работа с кодами ошибок OBD2
│       ├── expenses_and_repairs/ # Учет расходов и ремонтов
│       ├── findtransport/       # Поиск транспорта
│       ├── fuel_prices/         # Цены на топливо
│       ├── others/              # Прочие функции
│       ├── placesearch/         # Поиск мест
│       ├── reminders/           # Напоминания
│       ├── weather/             # Погода
│       └── website/             # Интеграция с сайтом
│
├── decorators/                  # Декораторы для обработчиков
│   ├── __init__.py              # Инициализация модуля декораторов
│   ├── blocked_user.py          # Проверка на блокировку пользователя
│   ├── captcha.py               # Защита от спама с помощью captcha
│   ├── channel_subscription.py  # Проверка подписки на канал
│   ├── chat_state.py            # Управление состоянием чата
│   ├── function_state.py        # Управление состоянием функций
│   ├── logging.py               # Логирование действий
│   ├── subscription.py          # Проверка наличия подписки
│   ├── text_only.py             # Ограничение типа сообщений
│   ├── usage_tracking.py        # Отслеживание использования функций
│   ├── user_activity.py         # Отслеживание активности пользователя
│   └── user_restriction.py      # Ограничения для пользователей
│
├── data/                        # Данные пользователей и бота
│   ├── admin/                   # Данные для административных функций
│   │   ├── active_chats/        # Чаты
│   │   ├── admin_user_payments/ # Платежи
│   │   ├── bloked_bot/          # Заблокированные пользователи
│   │   ├── captcha/             # Данные captcha
│   │   ├── chats/               # Информация о чатах
│   │   ├── functions/           # Настройки функций
│   │   ├── log/                 # Логи и отчеты
│   │   ├── statistics/          # Статистические данные
│   │   ├── subscriptions/       # Информация о подписках
│   │   └── user_activity/       # Данные активности пользователей
|   |   └── ...                  # Другие данные 
│   │
│   └── user/                    # Пользовательские данные
│       ├── azs/                 # Данные о ценах на топливо
│       ├── calculators/         # Данные калькуляторов
│       ├── cityforprice/        # Города для цен
│       ├── expenses_and_repairs/ # Траты и ремонты
│       ├── findtransport/       # Данные поиска транспорта
│       ├── notifications/       # Уведомления
│       └── reminders/           # Напоминания
|       └── ...                  # Другие данные 
│
├── files/                       # Статические файлы и ресурсы
│   ├── files_for_blank_forms/   # Бланки документов
│   │   ├── dkp.pdf              # Договор купли-продажи
│   │   ├── doverennosti.pdf     # Доверенности
│   │   └── evroprotokol.pdf     # Европротокол
│   │
│   ├── files_for_bot/           # Конфигурационные файлы бота
│   │   ├── free_and_paid_features.json       # Настройки платных функций
│   │   ├── functions_and_permissions.json    # Права доступа
│   │   ├── promo_and_channels.json           # Промокоды и каналы
│   │   └── subscription_and_store.json       # Подписки и магазин
│   │
│   ├── files_for_calc/          # Файлы для калькуляторов
│   │   ├── files_for_alko/      # Данные для калькулятора алкоголя
│   │   ├── files_for_nalog/     # Данные для налогового калькулятора
│   │   ├── files_for_osago/     # Данные для калькулятора ОСАГО
│   │   └── files_for_rastamozka/ # Данные для растаможки
│   │
│   ├── files_for_cams/          # Данные для камер
│   │   └── milestones.csv       # Вехи камер
│   │
│   ├── files_for_obd2/          # Файлы для OBD2
│   │   └── codes_obd2.txt       # Коды ошибок OBD2
│   │
│   ├── files_for_price_weather/ # Файлы для цен и погоды
│   │   ├── combined_cities*.txt # Список городов
│   │   ├── proxy.txt            # Список прокси
│   │   └── tor_most.txt         # Tor мосты
│   │
│   ├── files_for_regions/       # Данные о регионах
│   │   └── regions.txt          # Список регионов
│   │
│   └── images/                  # Изображения
│
└── backups/                     # Резервные копии данных
    └── full_backup_20250101_000000.zip  # Пример файла резервной копии
```

---

## 📋 Запуск бота

### Для пользователей:
1. Откройте Telegram и найдите бота: [@CarMngrBot](https://t.me/CarMngrBot)
2. Нажмите кнопку **Start** или введите команду `/start`
3. Следуйте инструкциям бота для начала использования

### Для разработчиков:
1. Клонируйте репозиторий
```bash
git clone <url-репозитория>
cd carmngrbot
```

2. Установите зависимости
```bash
pip install -r requirements.txt
```

3. Создайте файл `.env` с необходимыми переменными окружения

Пример содержимого файла `.env`:
```
# Основные настройки Telegram бота
BOT_TOKEN = ваш_api_telegram # Токен вашего бота от BotFather
PAYMENT_PROVIDER_TOKEN = ваш_api_telegram_payments # Токен для приема платежей в Telegram

# Администраторские учетные данные
ADMIN_USERNAME = ваш_username_админа
ADMIN_PASSWORD = ваш_password_админа

# API ключи для внешних сервисов
OPENWEATHERMAP_API_KEY = ваш_api_openweathermap # Ключ для сервиса прогноза погоды
WEATHERAPI_API_KEY = ваш_api_weatherapi # Альтернативный ключ API погоды
LOCATIONIQ_API_KEY = ваш_api_locationiq # Ключ для геолокации

# Настройки Paymaster для обработки платежей
PAYMASTER_MERCHANT_ID = ваш_id_paymaster # ID мерчанта в системе Paymaster
PAYMASTER_SECRET_KEY = ваш_key_paymaster # Секретный ключ для API Paymaster
PAYMASTER_TOKEN = ваш_api_paymaster # Токен доступа к API Paymaster

# Ссылки и идентификаторы
REFERRAL_BOT_URL = ваш_url_telegram_bot # URL для реферальной программы
SUBSCRIBE_CHANNEL_URL = ваш_url_telegram_chanale # Канал для обязательной подписки
CHANNEL_CHAT_ID = ваш_id_telegram_chanale # ID чата/канала в числовом формате

```

4. Запустите бота
```bash
python main.py
```

---

## 🌐 Связанные проекты

- [Сайт Car Manager Bot](http://carmngrbot.com.swtest.ru/) - официальный сайт проекта
- [GitHub репозиторий сайта](https://github.com/EvgenyAlex21/CarMngrBot-Website) - исходный код сайта бота

---

## 🌟 Поддержка проекта

Если проект вам нравится и помогает:

1. ⭐ **Используйте бота** — [@CarMngrBot](https://t.me/CarMngrBot)
2. 📢 **Расскажите друзьям** об удобном автомобильном помощнике
3. 🔄 **Поделитесь** в социальных сетях
4. 📱 **Подпишитесь** на [новостной канал](https://t.me/CarMngrBot_news)

---

<div align="center">

**Спасибо за интерес к проекту Car Manager Bot!**

[🚀 **Начать использовать бота**](https://t.me/CarMngrBot) | [📢 **Новости и обновления**](https://t.me/CarMngrBot_news) | [🌐 **Информационный сайт**](http://carmngrbot.com.swtest.ru)

---

*© 2025 Car Manager Bot. Все права защищены.*

**Проект**: Стартап одного разработчика  
**Разработчик**: [Евгений Александрин](https://t.me/x_evgenyalex_x)  
**Город**: Чебоксары, Россия  
**Сайт**: [carmngrbot.com.swtest.ru](http://carmngrbot.com.swtest.ru)  
**Последнее обновление README**: 22 августа 2025 г.  
**Объем проекта**: 37,000+ строк кода

</div>